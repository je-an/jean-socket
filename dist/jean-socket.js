!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():(e.Socket=e.Socket||{},e.Socket=n())}(this,function(){var e,n;return function(t){function r(e){for(var n=0,t=[];n<e.length;n++){var r=s.resolved[e[n]];r&&t.push(r)}return t}function i(){for(var e in s.unresolved){var n=s.unresolved[e],t=r(n.dependencies);o(e,n.factory,n.dependencies,t,!1)}}function o(e,n,t,r,i){r.length===t.length?s.resolved[e]=n.apply(n,r):i&&(s.unresolved[e]={dependencies:t,factory:n})}var s={resolved:{},unresolved:{}};n=function(e,n,t){return s.resolved[e]?void console.warn("There is already a module with id <"+e+"> defined. Therefore this module will be ignored"):"string"==typeof e&&Array.isArray(n)&&"function"==typeof t?(0===n.length?o(e,t,n,[],!1):o(e,t,n,r(n),!0),void i()):void console.warn("Passed arguments for module are invalid")},n.amd={},e=function(e,n){e=Array.isArray(e)?e:[e];var t=r(e);if(1===t.length&&!n)return t[0];if(t.length!==e.length||!n)throw new Error("Not all modules are resolved");n.apply(n,t)}}(),n("node_modules/jean-amd/dist/jean-amd",function(){}),n("TypeCheck",[],function(){return{isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:function(e){var n=!1;if(this.isString(e)||this.isFunction(e))return!1;if(this.isEmptyObject(e))return!0;for(var t in e)if(e.hasOwnProperty(t)){n=!0;break}return n},isEmptyObject:function(e){var n=!0;if(!this.isDefined(e)||this.isBoolean(e)||this.isFunction(e)||this.isNumber(e)||this.isString(e)||Array.isArray(e))return!1;for(var t in e)if(e.hasOwnProperty(t)){n=!1;break}return n},isFunction:function(e){return"function"==typeof e},isDefined:function(e){return void 0!==e&&null!=e},isArrayTypeOf:function(e,n){var t=!0;if(!this.isString(n))throw new TypeError("options.type is not a string");if(!Array.isArray(e))throw new TypeError("options.array is not an array");0===e.length&&(t=!1);for(var r=0,i=e.length;r<i;r++){if(typeof e[r]!==n){t=!1;break}}return t}}}),n("Callback",["TypeCheck"],function(e){var n=function(n){e.isDefined(n)&&e.isObject(n)||(n={}),this.id=e.isString(n.id)?n.id:"",this._callbacks=[]};return n.prototype.registerFunction=function(n){var t=!1;return e.isFunction(n)?(this._callbacks.push(n),t=!0):t=!1,t},n.prototype.unregisterFunction=function(e){var n=this._callbacks.indexOf(e),t=!0;return n>=0?this._callbacks.splice(n,1):t=!1,t},n.prototype.broadcastToFunctions=function(e){var n=this._callbacks,t=n.length,r=!1;if(t>0){for(var i=0;i<t;i++)n[i].bind(this)(e);r=!0}return r},n}),n("src/Socket",["TypeCheck","Callback"],function(e,n){var t=function(t){if(!e.isString(t.url))throw new TypeError("Passed url is not a string");this._socket=new WebSocket(t.url),this._onOpenCallback=new n({id:"onopen"}),this._onMessageCallback=new n({id:"onmessage"}),this._onErrorCallback=new n({id:"onerror"}),this._onCloseCallback=new n({id:"onclose"}),this._socketReady=!1,this._socketCache=[],this._socket.onopen=function(){var e=this._socketCache,n=e.length;if(n>0)for(var t=0;t<n;t++)this._socket.send(JSON.stringify(e[t]));this._socketReady=!0,this._onOpenCallback.broadcastToFunctions()}.bind(this),this._socket.onmessage=function(n){if(e.isDefined(n)&&e.isDefined(n.data)){var t=JSON.parse(n.data);this._onMessageCallback.broadcastToFunctions(t)}}.bind(this),this._socket.onerror=function(n){e.isDefined(n)&&this._onErrorCallback.broadcastToFunctions(n)}.bind(this),this._socket.onclose=function(n){e.isDefined(n)&&this._onCloseCallback.broadcastToFunctions(n)}.bind(this)};return t.messageType=t.prototype.messageState={SENT:"sent",CACHED:"cached"},t.eventType=t.prototype.eventType={OPEN:"onopen",MESSAGE:"onmessage",ERROR:"onerror",CLOSE:"onclose"},t.prototype.sendMessage=function(e){var n="";return this._socketReady?(this._socket.send(JSON.stringify(e)),n=this.messageState.SENT):(this._socketCache.push(e),n=this.messageState.CACHED),n},t.prototype.registerCallback=function(e,n){return this._processCallbackLogic("register",e,n)},t.prototype.unregisterCallback=function(e,n){return this._processCallbackLogic("unregister",e,n)},t.prototype._processCallbackLogic=function(n,t,r){var i=this.eventType,o=!1,s=this._onOpenCallback,a=this._onMessageCallback,c=this._onErrorCallback,u=this._onCloseCallback;if(!e.isFunction(r))throw new TypeError("callback is not a function");switch(t){case i.OPEN:o="register"===n?s.registerFunction(r):s.unregisterFunction(r);break;case i.MESSAGE:o="register"===n?a.registerFunction(r):a.unregisterFunction(r);break;case i.ERROR:o="register"===n?c.registerFunction(r):c.unregisterFunction(r);break;case i.CLOSE:o="register"===n?u.registerFunction(r):u.unregisterFunction(r)}return o},t}),e("src/Socket")});